"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[992],{3342:function(e,t,a){a.d(t,{Z:function(){return o}});var i="ButtonBack_btnBack__tjozC",n=a(184),o=function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("button",{className:i,type:"button",children:"\u2190 Go Back"})})}},2992:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=a(3433),n=a(9439),o=a(8014),c={detalis:"MovieDetalis_detalis__UlcmQ",posterMovie:"MovieDetalis_posterMovie__M4a7c",detalisWrapper:"MovieDetalis_detalisWrapper__Ap-mN",columnInfo:"MovieDetalis_columnInfo__KSsuK",btnBackDetalisWrapper:"MovieDetalis_btnBackDetalisWrapper__jOg0F",btnBack:"MovieDetalis_btnBack__knIVC",iconBack:"MovieDetalis_iconBack__4gnQx",infoTitle:"MovieDetalis_infoTitle__V6MOk",scoreDetalis:"MovieDetalis_scoreDetalis__wswZn",overviewTitle:"MovieDetalis_overviewTitle__-X5em",overview:"MovieDetalis_overview__OZ4Y2",ganreListDetails:"MovieDetalis_ganreListDetails__2xy5E",columnImg:"MovieDetalis_columnImg__rXv+c",detalisImg:"MovieDetalis_detalisImg__3LoFp",reviewList:"MovieDetalis_reviewList__5y-3B",cast:"MovieDetalis_cast__cUluE",review:"MovieDetalis_review__gmdkb",videoBackdrop:"MovieDetalis_videoBackdrop__VDDyM",videoModal:"MovieDetalis_videoModal__nUs6R",iconBackModal:"MovieDetalis_iconBackModal__lydSk",addMoviesBtn:"MovieDetalis_addMoviesBtn__ETZC0"},r=a(9085),s=a(5700),l=a(1087),d=a(7689),v=a(2791),u=a(7367),_=a(9831),f=a(9686),h=a(3342),p=a(184);var m=function(){var e,t,a=(0,v.useState)([]),m=(0,n.Z)(a,2),g=m[0],y=m[1],k=(0,v.useState)([]),M=(0,n.Z)(k,2),w=M[0],x=M[1],j=(0,v.useState)(!1),D=(0,n.Z)(j,2),b=D[0],Z=D[1],N=(0,v.useState)(null),B=(0,n.Z)(N,2),I=B[0],S=B[1],T=(0,v.useState)(!1),L=(0,n.Z)(T,2),C=L[0],E=L[1],A=(0,d.UO)().movieId,F=(0,d.TH)(),O=null!==(e=null===(t=F.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/";function U(){E(!1),S(null),document.body.style.overflow="auto"}(0,d.s0)(),(0,v.useEffect)((function(){var e=localStorage.getItem("favorites");e&&x(JSON.parse(e))}),[]),(0,v.useEffect)((function(){Z(w.some((function(e){return e.id===g.id})))}),[w,g.id]),(0,v.useEffect)((function(){u.Z.fetchMovieDetalis(A).then((function(e){y(e)})).catch("error")}),[A]),(0,v.useEffect)((function(){return window.addEventListener("keydown",W),function(){window.removeEventListener("keydown",W)}}));var W=function(e){"Escape"===e.code&&U()};return(0,p.jsx)(p.Fragment,{children:g&&(0,p.jsx)("section",{className:c.detalis,children:(0,p.jsxs)(s.Z,{children:[(0,p.jsx)("div",{className:c.btnBackDetalisWrapper,children:(0,p.jsx)(l.rU,{to:O,children:(0,p.jsx)(h.Z,{})})}),(0,p.jsxs)("div",{className:c.detalisWrapper,children:[(0,p.jsx)("img",{className:c.posterMovie,src:g.backdrop_path?"https://image.tmdb.org/t/p/w500/".concat(g.backdrop_path):_,alt:g.title}),(0,p.jsxs)("div",{className:c.columnInfo,children:[(0,p.jsx)("h2",{className:c.infoTitle,children:g.title?g.title:"Movie without a title"}),(0,p.jsxs)("p",{className:c.scoreDetalis,children:["User score: ",(10*g.vote_average).toFixed(0),"%"]}),(0,p.jsx)("h3",{className:c.overviewTitle,children:"Overview"}),(0,p.jsx)("p",{className:c.overview,children:g.overview?g.overview:"Movie without a overview"}),(0,p.jsx)("ul",{className:c.ganreListDetails,children:g.genres&&g.genres.map((function(e){var t=e.name,a=e.id;return(0,p.jsx)("li",{children:t},a)}))}),(0,p.jsxs)("ul",{className:c.reviewList,children:[(0,p.jsx)("li",{className:c.reviewiLstItem,children:(0,p.jsx)(l.rU,{to:"cast",state:F.state,className:c.cast,children:"Cast"})}),(0,p.jsx)("li",{className:c.reviewiLstItem,children:(0,p.jsx)(l.rU,{to:"review",state:F.state,className:c.review,children:"Rewiew"})}),(0,p.jsx)("li",{className:c.reviewiLstItem,children:(0,p.jsx)(l.rU,{to:"/library",onClick:function(){var e={id:g.id,title:g.title,poster_path:g.poster_path,vote_average:g.vote_average.toFixed(1),release_date:g.release_date.slice(0,4)};if(b){var t=w.filter((function(e){return e.id!==g.id}));x(t),localStorage.setItem("favorites",JSON.stringify(t)),Z(!1),r.Am.success("Film removed from the library")}else{var a=[].concat((0,i.Z)(w),[e]);x(a),localStorage.setItem("favorites",JSON.stringify(a)),Z(!0),r.Am.success("Film added to the library")}},children:(0,p.jsx)("button",{type:"button",className:c.addMoviesBtn,children:b?"Remove from library":"Add movie to library"})})})]})]}),(0,p.jsxs)("div",{className:c.columnImg,children:[(0,p.jsx)("img",{src:g.poster_path?"https://image.tmdb.org/t/p/w500/".concat(g.poster_path):_,alt:g.title?g.title:"Movie without a title",width:300,className:c.detalisImg,style:{cursor:"pointer"},onClick:function(){u.Z.fetchTrailerMovies(A).then((function(e){var t=e.find((function(e){return"Trailer"===e.type}));t?(S(t.key),E(!0),document.body.style.overflow="hidden"):(E(!1),r.Am.error("No trailer available for this movie."))}))}}),C&&(0,p.jsxs)("div",{className:c.videoBackdrop,onClick:function(e){e.currentTarget===e.target&&U()},children:[(0,p.jsx)(o.lox,{className:c.iconBackModal,onClick:U}),(0,p.jsx)(f.Z,{className:c.videoModal,videoId:I,opts:{width:"100%",height:"100%",playerVars:{autoplay:1,controls:0,cc_load_policy:0,fs:0,iv_load_policy:0,modestbranding:0,rel:0,showinfo:0},origin:"http://localhost:3000"}})]})]})]}),(0,p.jsx)(v.Suspense,{children:(0,p.jsx)(d.j3,{})})]})})})}},7367:function(e,t,a){var i=a(1243),n="https://api.themoviedb.org/3/",o="f27eea818d2010463700365b0c06a16e";var c={fetchMoviesbyActors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return i.Z.get("".concat(n,"person/").concat(e,"/movie_credits?api_key=").concat(o,"&page=").concat(t)).then((function(e){return e.data.cast}))},fetchActorInfoAndMovies:function(e){return i.Z.get("".concat(n,"person/").concat(e,"?api_key=").concat(o)).then((function(e){return e.data}))},fetchTrending:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return i.Z.get("".concat(n,"trending/all/day?api_key=").concat(o,"&page=").concat(e)).then((function(e){return e.data.results}))},fetchSearchMovie:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return i.Z.get("".concat(n,"search/movie?query=").concat(e,"&api_key=").concat(o,"&page=").concat(t)).then((function(e){return e.data.results}))},fetchMovieDetalis:function(e){return i.Z.get("".concat(n,"movie/").concat(e,"?api_key=").concat(o)).then((function(e){return e.data}))},fetchMovieCredits:function(e){return i.Z.get("".concat(n,"movie/").concat(e,"/credits?api_key=").concat(o)).then((function(e){return e.data}))},fetchMovieReview:function(e){return i.Z.get("".concat(n,"movie/").concat(e,"/reviews?api_key=").concat(o)).then((function(e){return e.data.results}))},fetchTrailerMovies:function(e){return i.Z.get("".concat(n,"movie/").concat(e,"/videos?api_key=").concat(o)).then((function(e){return e.data.results}))},fetchAllgenres:function(){return i.Z.get("".concat(n,"/genre/movie/list?api_key=").concat(o)).then((function(e){return e.data.genres}))},fetchByGenre:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return i.Z.get("".concat(n,"/discover/movie?api_key=").concat(o,"&with_genres=").concat(e,"&page=").concat(t)).then((function(e){return e.data}))},fetchActors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t?"".concat(n,"search/person?api_key=").concat(o,"&page=").concat(e,"&query=").concat(t):"".concat(n,"person/popular?api_key=").concat(o,"&page=").concat(e);return i.Z.get(a).then((function(e){return e.data}))},fetchByYear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return i.Z.get("".concat(n,"discover/movie?api_key=").concat(o,"&sort_by=popularity.desc&page=").concat(e,"&primary_release_year=").concat(t)).then((function(e){return e.data.results}))},fetchExpectedMovies:function(){return i.Z.get("".concat(n,"/movie/upcoming?api_key=").concat(o)).then((function(e){return e.data.results}))},fetchFilmsByRating:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return i.Z.get("".concat(n,"/movie/top_rated?api_key=").concat(o,"&page=").concat(e)).then((function(e){return e.data}))},fetchWaitingForTheMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return i.Z.get("".concat(n,"/movie/upcoming?api_key=").concat(o,"&primary_release_date.gte=").concat((new Date).toISOString().slice(0,10),"&page=").concat(e)).then((function(e){return e.data}))}};t.Z=c},9831:function(e,t,a){e.exports=a.p+"static/media/poster.f55d248454cd0ab3bc5b.jpeg"}}]);
//# sourceMappingURL=992.7d4e3719.chunk.js.map